function setCookie(e,t,r){var a="";if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),a="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}function getCookie(e){for(var t=e+"=",r=document.cookie.split(";"),a=0;a<r.length;a++){for(var i=r[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function eraseCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}function scrapeFilters(){var e=[],t;$("#ingredientChooser").val().length>0&&e.push("."+$("#ingredientChooser").val());for(var r=1;r<$("fieldset").length+1;r++)t="",$("#filtergroup"+r+" input:checked").each(function(){t=t.length>0?t+", ."+$(this).val().replace(" ","_").replace("/","_"):"."+$(this).val().replace(" ","_").replace("/","_")}),t.length>0&&e.push(t);return setCookie("harecipesform",e.join(),7),e}function restoreFilters(e){$.each(e.split(","),function(e,t){1==t.indexOf("iid")?$("#ingredientChooser").val(t.slice(1)):$("input[name="+t.slice(1)+"]").each(function(){$(this).prop("checked",!0)})})}function resetFilters(){$("input").prop("checked",!1),$("#ingredientChooser").val(""),eraseCookie("harecipesform")}function refilterRecipes(){var e=scrapeFilters();if(0===e.length){$(".recipeSummaries tr").show(),$("#matchesAnnotation").text($(".recipeSummaries tr").length+" recipes"),$("#tabularnav").empty();var t=[];$.each($(".recipeSummaries tr"),function(e,r){-1==t.indexOf($(r).data("tabularletter"))&&(t.push($(r).data("tabularletter")),$(r).attr("id","letter_"+$(r).data("tabularletter")))});for(var r=0;r<t.length;r++)$("#tabularnav").append('<a href="#letter_'+t[r]+'">'+t[r]+"</a> ")}else{var a=$(".recipeSummaries tr");a.hide();for(var i=0;i<e.length;i++)a=a.filter($(e[i]));if(a.show(),a.length>1?($("#matchesAnnotation").text(a.length+" matches out of "+$(".recipeSummaries tr").length),$("#matchesAnnotation").append($('<a class="inlineButton" style="margin-left: 1em; cursor: pointer;">RESET / SHOW ALL</a>'))):$("#matchesAnnotation").text(a.length+" match out of "+$(".recipeSummaries tr").length),$("#tabularnav").empty(),a.length>16){var t=[];$.each(a,function(e,r){-1==t.indexOf($(r).data("tabularletter"))&&(t.push($(r).data("tabularletter")),$(r).attr("id","letter_"+$(r).data("tabularletter")))});for(var r=0;r<t.length;r++)$("#tabularnav").append('<a href="#letter_'+t[r]+'">'+t[r]+"</a> ")}}}var searchPrompt="";jQuery(document).ready(function(){$("#invokeSearchOverlay").click(function(){$("#regularContent").hide(),$("#searchOverlay").show(),$("#searchBox").focus()}),$("#invokeSearchOverlayMobile").click(function(){$("#regularContent").hide(),$("#searchOverlay").show(),$("#searchBox").focus()}),$("#dismissSearchOverlay").click(function(){$("#regularContent").show(),$("#searchOverlay").hide()}),$("#searchBox").keyup(function(){var e=$("#searchBox").val(),t=e.toLowerCase().split(" ")[0],r=$("#searchResults");r.hide(),e.length>1&&$.getJSON("/search/"+e,function(t){if(r.empty(),t.length>0){for(var a=0;a<t.length;a++)t[a].icons?r.append($('<a href="'+t[a].url+'"><div class="match"><div class="icons">'+t[a].icons+'</div><div class="summary"><p><strong>'+t[a].name+"</strong><br />"+t[a].summary+"</p></div></div></a>")):r.append($('<a href="'+t[a].url+'"><div class="match"><div class="summary"><p><strong>'+t[a].name+"</strong><br />"+t[a].summary+"</p></div></div></a>"));r.show()}else e.length>0&&(r.append($('<p><a href=""><em>No matches. Try searching on the first few letters of a product or category.</em></a></p>')),r.show())})}),$("#sidebar-menu ul").hide(),$("#sidebar-menu li").prepend("<span class='handle'></span>"),$("#sidebar-menu li:has(ul)").children(":first-child").addClass("collapsed").click(function(){$(this).toggleClass("collapsed expanded").siblings("ul").toggle()}),$(".toggle").click(function(){$("#modal").toggle(),$(".sidebar2").toggle()}),$("#modal").click(function(){$("#modal").toggle(),$(".sidebar2").toggle()});var e=getCookie("harecipesform");e?(restoreFilters(e),refilterRecipes()):refilterRecipes(),$("#recipefilters input").change(function(){refilterRecipes()}),$("#recipefilters select").change(function(){refilterRecipes()}),$("#recipeFiltersMoreButton").click(function(){var e=$(this).prev();"yes"===e.data("expanded")?(e.hide(),e.data("expanded","no"),$(this).text("Show Recipe Filters")):(e.show(),e.data("expanded","yes"),$(this).text("Hide Recipe Filters"))}),$("#matchesAnnotation").click(function(){resetFilters(),refilterRecipes()})});