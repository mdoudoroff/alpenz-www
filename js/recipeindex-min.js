function scrapeFilters(){for(var e=[],t,a=1;a<$("fieldset").length+1;a++)t="",$("#filtergroup"+a+" input:checked").each(function(){t=t.length>0?t+", ."+$(this).val().replace(" ","_").replace("/","_"):"."+$(this).val().replace(" ","_").replace("/","_")}),t.length>0&&e.push(t);return e}function refilterRecipes(){var e=scrapeFilters();if(console.log(e),0===e.length)$(".recipeSummaries tr").show(),$("#matchesAnnotation").text($(".recipeSummaries tr").length+" recipes");else{var t=$(".recipeSummaries tr");t.hide();for(var a=0;a<e.length;a++)t=t.filter($(e[a]));t.show(),t.length>1?$("#matchesAnnotation").text(t.length+" matches out of "+$(".recipeSummaries tr").length):$("#matchesAnnotation").text(t.length+" match out of "+$(".recipeSummaries tr").length)}}var searchPrompt="";jQuery(document).ready(function(){$("#invokeSearchOverlay").click(function(){$("#regularContent").hide(),$("#searchOverlay").show()}),$("#invokeSearchOverlayMobile").click(function(){$("#regularContent").hide(),$("#searchOverlay").show()}),$("#dismissSearchOverlay").click(function(){$("#regularContent").show(),$("#searchOverlay").hide()}),$("#searchBox").keyup(function(){var e=$("#searchBox").val(),t=e.toLowerCase().split(" ")[0],a=$("#searchResults");a.hide(),e.length>1&&$.getJSON("/search/"+e,function(t){if(a.empty(),t.length>0){for(var r=0;r<t.length;r++)t[r].icons?a.append($('<a href="'+t[r].url+'"><div class="match"><div class="icons">'+t[r].icons+'</div><div class="summary"><p><strong>'+t[r].name+"</strong><br />"+t[r].summary+"</p></div></div></a>")):a.append($('<a href="'+t[r].url+'"><div class="match"><div class="summary"><p><strong>'+t[r].name+"</strong><br />"+t[r].summary+"</p></div></div></a>"));a.show()}else e.length>0&&(a.append($('<p><a href=""><em>No matches. Try searching on the first few letters of a product or category.</em></a></p>')),a.show())})}),$("#sidebar-menu ul").hide(),$("#sidebar-menu li").prepend("<span class='handle'></span>"),$("#sidebar-menu li:has(ul)").children(":first-child").addClass("collapsed").click(function(){$(this).toggleClass("collapsed expanded").siblings("ul").toggle()}),$(".toggle").click(function(){$("#modal").toggle(),$(".sidebar2").toggle()}),$("#modal").click(function(){$("#modal").toggle(),$(".sidebar2").toggle()}),$("#recipefilters input").change(function(){refilterRecipes()}),$("#recipeFiltersMoreButton").click(function(){var e=$(this).prev();"yes"===e.data("expanded")?(e.css("max-height","4.25em"),e.data("expanded","no"),$(this).text("Expand ▾")):(e.css("max-height","100em"),e.data("expanded","yes"),$(this).text("Collapse ▴"))})});